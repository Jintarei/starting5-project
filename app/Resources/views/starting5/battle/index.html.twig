{% extends 'base.html.twig' %}

{% block body %}

    <div class="container">
        <div class="col-lg-12 mx-auto">
            <h2>
                {{ name }}
            </h2>
            <div id="battle">
                <a href="">Battle</a>
            </div>

           <div class="row text-center">
               <div id="myTeam" class="col-md-12 battle-my-team">
                   {% include 'starting5/battle/myTeam.html.twig' with {'team' : activeTeam }  %}
               </div>
               <div class="col-md-12"><h2>VS</h2></div>
               <div id="opponent" class="col-md-12"></div>
               <div id="confrontButton" class="col-md-12"></div>
           </div>
            <script type="text/javascript">
                var battle = $("#battle");
                var loading = $('.loading');
                var opponent = $('#opponent');
                var confrontButton = $('#confrontButton');
                battle.click(function () {
                    $.ajax({
                        url: '{{ path('battle.search') }}',
                        type: 'POST',
                        beforeSend: function () {
                            loading.show();
                        },
                        complete: function () {
                            loading.hide();
                        },
                        success: function (success) {
                            opponent.empty(); confrontButton.empty();
                            opponent.append(success.opponent);
                            confrontButton.append(success.button);
                        }
                    });
                });
            </script>
        </div>
    </div>

{% endblock %}